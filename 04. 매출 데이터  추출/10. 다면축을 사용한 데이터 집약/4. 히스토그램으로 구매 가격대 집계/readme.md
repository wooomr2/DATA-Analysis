## Postgresql - 계층판정 함수: with_bucket
with_bucket(price, min_price, range_price, bucket_num) as bucket

## 히스토그램
1. 최대값, 최소값, (최대-최소)를 구한다.
2. 범위를 기반으로 몇 개의 계급으로 나눌 지 결정하고, 각 계급의 하한과 상한을 구한다.
3. 각 계급에 들어가는 데이터 개수(도수)를 구히고, 이를 표로 정리한다.

- 범위를 계층으로 분할하려면, 
- 정규화금액:: diff = (매출-최소값)
- 첫번 째 계층의 범위 = 금액범위(range_price) / 계급수(bucket_num)
- 계급:: bucket = floor(diff / 계층의 범위) 
- 계급판정로직에 (하한이상~상한미만)을 사용했기 때문에,
- 최대값이 최대계급수(10)을 넘어가게 된다.
- 계급 상한을 금액최대값+1로 설정해, 모든 레코드가 금액상한 미만이 되게만들어준다.

- 상한-하한으로 최적 버무이를 구할 수도 있지만, 소수점으로 구분된 리포트는 가독성이 좋지 않음.
- 고정값 기반으로 임의의 게층 너비로 변경할 수 있는 히스토그램을 만들어야함